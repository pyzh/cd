<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../otp_doc.css" type="text/css">
<title>Erlang -- Functions</title>
</head>
<body bgcolor="white" text="#000000" link="#0000ff" vlink="#ff00ff" alink="#ff0000"><div id="container">
<script id="js" type="text/javascript" language="JavaScript" src="../js/flipmenu/flipmenu.js"></script><script id="js2" type="text/javascript" src="../js/erlresolvelinks.js"></script><script language="JavaScript" type="text/javascript">
            <!--
              function getWinHeight() {
                var myHeight = 0;
                if( typeof( window.innerHeight ) == 'number' ) {
                  //Non-IE
                  myHeight = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth ||
                                                         document.documentElement.clientHeight ) ) {
                  //IE 6+ in 'standards compliant mode'
                  myHeight = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                  //IE 4 compatible
                  myHeight = document.body.clientHeight;
                }
                return myHeight;
              }

              function setscrollpos() {
                var objf=document.getElementById('loadscrollpos');
                 document.getElementById("leftnav").scrollTop = objf.offsetTop - getWinHeight()/2;
              }

              function addEvent(obj, evType, fn){
                if (obj.addEventListener){
                obj.addEventListener(evType, fn, true);
                return true;
              } else if (obj.attachEvent){
                var r = obj.attachEvent("on"+evType, fn);
                return r;
              } else {
                return false;
              }
             }

             addEvent(window, 'load', setscrollpos);

             //--></script><div id="leftnav"><div class="innertube">
<img alt="Erlang logo" src="../erlang-logo.png"><br><small><a href="users_guide.html">User's Guide</a><br><a href="../pdf/otp-system-documentation-6.4.1.6.pdf">PDF</a><br><a href="../index.html">Top</a></small><p><strong>Erlang Reference Manual</strong><br><strong>User's Guide</strong><br><small>Version 6.4.1.6</small></p>
<br><a href="javascript:openAllFlips()">Expand All</a><br><a href="javascript:closeAllFlips()">Contract All</a><p><small><strong>Chapters</strong></small></p>
<ul class="flipMenu" imagepath="../js/flipmenu">
<li id="no" title="Introduction" expanded="false">Introduction<ul>
<li><a href="introduction.html">
              Top of chapter
            </a></li>
<li title="Purpose"><a href="introduction.html#idp24373248">Purpose</a></li>
<li title="Prerequisites"><a href="introduction.html#idp24369472">Prerequisites</a></li>
<li title="Document Conventions"><a href="introduction.html#idp24368144">Document Conventions</a></li>
<li title="Complete List of BIFs"><a href="introduction.html#idp24363056">Complete List of BIFs</a></li>
<li title="Reserved Words"><a href="introduction.html#idm3503648">Reserved Words</a></li>
</ul>
</li>
<li id="no" title="Character Set and Source File Encoding" expanded="false">Character Set and Source File Encoding<ul>
<li><a href="character_set.html">
              Top of chapter
            </a></li>
<li title="Character Set"><a href="character_set.html#idp24243312">Character Set</a></li>
<li title="Source File Encoding"><a href="character_set.html#idp24200080">Source File Encoding</a></li>
</ul>
</li>
<li id="no" title="Data Types" expanded="false">Data Types<ul>
<li><a href="data_types.html">
              Top of chapter
            </a></li>
<li title="Terms"><a href="data_types.html#idm4249792">Terms</a></li>
<li title="Number"><a href="data_types.html#idm4026192">Number</a></li>
<li title="Atom"><a href="data_types.html#idm4409600">Atom</a></li>
<li title="Bit Strings and Binaries"><a href="data_types.html#idm4263424">Bit Strings and Binaries</a></li>
<li title="Reference"><a href="data_types.html#idm4411344">Reference</a></li>
<li title="Fun"><a href="data_types.html#idm4156864">Fun</a></li>
<li title="Port Identifier"><a href="data_types.html#idm4200624">Port Identifier</a></li>
<li title="Pid"><a href="data_types.html#idp24302864">Pid</a></li>
<li title="Tuple"><a href="data_types.html#idm4194944">Tuple</a></li>
<li title="Map"><a href="data_types.html#idm4193344">Map</a></li>
<li title="List"><a href="data_types.html#idp24403952">List</a></li>
<li title="String"><a href="data_types.html#idp24352608">String</a></li>
<li title="Record"><a href="data_types.html#idp24357312">Record</a></li>
<li title="Boolean"><a href="data_types.html#idp25022624">Boolean</a></li>
<li title="Escape Sequences"><a href="data_types.html#idp25026080">Escape Sequences</a></li>
<li title="Type Conversions"><a href="data_types.html#idp25068192">Type Conversions</a></li>
</ul>
</li>
<li id="no" title="Pattern Matching" expanded="false">Pattern Matching<ul>
<li><a href="patterns.html">
              Top of chapter
            </a></li>
<li title="Pattern Matching"><a href="patterns.html#idp25083904">Pattern Matching</a></li>
</ul>
</li>
<li id="no" title="Modules" expanded="false">Modules<ul>
<li><a href="modules.html">
              Top of chapter
            </a></li>
<li title="Module Syntax"><a href="modules.html#idp25098960">Module Syntax</a></li>
<li title="Module Attributes"><a href="modules.html#idp25102688">Module Attributes</a></li>
<li title="Comments"><a href="modules.html#idp25158128">Comments</a></li>
<li title="The module_info/0 and module_info/1 functions"><a href="modules.html#idp25159760">The module_info/0 and module_info/1 functions</a></li>
</ul>
</li>
<li id="loadscrollpos" title="Functions" expanded="true">Functions<ul>
<li><a href="functions.html">
              Top of chapter
            </a></li>
<li title="Function Declaration Syntax"><a href="functions.html#idp25190624">Function Declaration Syntax</a></li>
<li title="Function Evaluation"><a href="functions.html#idp25204464">Function Evaluation</a></li>
<li title="Tail recursion"><a href="functions.html#idp25222528">Tail recursion</a></li>
<li title="Built-In Functions, BIFs"><a href="functions.html#idp25226496">Built-In Functions, BIFs</a></li>
</ul>
</li>
<li id="no" title="Types and Function Specifications" expanded="false">Types and Function Specifications<ul>
<li><a href="typespec.html">
              Top of chapter
            </a></li>
<li title="The Erlang Type Language"><a href="typespec.html#idp25240528">The Erlang Type Language</a></li>
<li title="Types and their Syntax"><a href="typespec.html#idp25246272">Types and their Syntax</a></li>
<li title="Type declarations of user-defined types"><a href="typespec.html#idp25346016">Type declarations of user-defined types</a></li>
<li title="Type information in record declarations"><a href="typespec.html#idp25355904">Type information in record declarations</a></li>
<li title="Specifications for functions"><a href="typespec.html#idp25365136">Specifications for functions</a></li>
</ul>
</li>
<li id="no" title="Expressions" expanded="false">Expressions<ul>
<li><a href="expressions.html">
              Top of chapter
            </a></li>
<li title="Expression Evaluation"><a href="expressions.html#idp25396144">Expression Evaluation</a></li>
<li title="Terms"><a href="expressions.html#idp25401280">Terms</a></li>
<li title="Variables"><a href="expressions.html#idp25402768">Variables</a></li>
<li title="Patterns"><a href="expressions.html#idp25418432">Patterns</a></li>
<li title="Match"><a href="expressions.html#idp25432784">Match</a></li>
<li title="Function Calls"><a href="expressions.html#idp25439792">Function Calls</a></li>
<li title="If"><a href="expressions.html#idp25463808">If</a></li>
<li title="Case"><a href="expressions.html#idp25471552">Case</a></li>
<li title="Send"><a href="expressions.html#idp25479328">Send</a></li>
<li title="Receive"><a href="expressions.html#idp25489328">Receive</a></li>
<li title="Term Comparisons"><a href="expressions.html#idp25509088">Term Comparisons</a></li>
<li title="Arithmetic Expressions"><a href="expressions.html#idp25540432">Arithmetic Expressions</a></li>
<li title="Boolean Expressions"><a href="expressions.html#idp25601216">Boolean Expressions</a></li>
<li title="Short-Circuit Expressions"><a href="expressions.html#idp25619808">Short-Circuit Expressions</a></li>
<li title="List Operations"><a href="expressions.html#idp25633696">List Operations</a></li>
<li title="Map Expressions"><a href="expressions.html#idp25641904">Map Expressions</a></li>
<li title="Bit Syntax Expressions"><a href="expressions.html#idp25711440">Bit Syntax Expressions</a></li>
<li title="Fun Expressions"><a href="expressions.html#idp25776528">Fun Expressions</a></li>
<li title="Catch and Throw"><a href="expressions.html#idp25795952">Catch and Throw</a></li>
<li title="Try"><a href="expressions.html#idp25813456">Try</a></li>
<li title="Parenthesized Expressions"><a href="expressions.html#idp25856336">Parenthesized Expressions</a></li>
<li title="Block Expressions"><a href="expressions.html#idp25860272">Block Expressions</a></li>
<li title="List Comprehensions"><a href="expressions.html#idp25863232">List Comprehensions</a></li>
<li title="Bit String Comprehensions"><a href="expressions.html#idp25880016">Bit String Comprehensions</a></li>
<li title="Guard Sequences"><a href="expressions.html#idp25895904">Guard Sequences</a></li>
<li title="Operator Precedence"><a href="expressions.html#idp25963584">Operator Precedence</a></li>
</ul>
</li>
<li id="no" title="The Preprocessor" expanded="false">The Preprocessor<ul>
<li><a href="macros.html">
              Top of chapter
            </a></li>
<li title="File Inclusion"><a href="macros.html#idp26001824">File Inclusion</a></li>
<li title="Defining and Using Macros"><a href="macros.html#idp26017296">Defining and Using Macros</a></li>
<li title="Predefined Macros"><a href="macros.html#idp26032112">Predefined Macros</a></li>
<li title="Macros Overloading"><a href="macros.html#idp26040208">Macros Overloading</a></li>
<li title="Flow Control in Macros"><a href="macros.html#idp26048528">Flow Control in Macros</a></li>
<li title="Stringifying Macro Arguments"><a href="macros.html#idp26064976">Stringifying Macro Arguments</a></li>
</ul>
</li>
<li id="no" title="Records" expanded="false">Records<ul>
<li><a href="records.html">
              Top of chapter
            </a></li>
<li title="Defining Records"><a href="records.html#idp26079632">Defining Records</a></li>
<li title="Creating Records"><a href="records.html#idp26083344">Creating Records</a></li>
<li title="Accessing Record Fields"><a href="records.html#idp26089888">Accessing Record Fields</a></li>
<li title="Updating Records"><a href="records.html#idp26094608">Updating Records</a></li>
<li title="Records in Guards"><a href="records.html#idp26098512">Records in Guards</a></li>
<li title="Records in Patterns"><a href="records.html#idp26102384">Records in Patterns</a></li>
<li title="Nested records"><a href="records.html#idp26105648">Nested records</a></li>
<li title="Internal Representation of Records"><a href="records.html#idp26109776">Internal Representation of Records</a></li>
</ul>
</li>
<li id="no" title="Errors and Error Handling" expanded="false">Errors and Error Handling<ul>
<li><a href="errors.html">
              Top of chapter
            </a></li>
<li title="Terminology"><a href="errors.html#idp26124288">Terminology</a></li>
<li title="Exceptions"><a href="errors.html#idp26139632">Exceptions</a></li>
<li title="Handling of Run-Time Errors in Erlang"><a href="errors.html#idp26160336">Handling of Run-Time Errors in Erlang</a></li>
<li title="Exit Reasons"><a href="errors.html#idp26167808">Exit Reasons</a></li>
</ul>
</li>
<li id="no" title="Processes" expanded="false">Processes<ul>
<li><a href="processes.html">
              Top of chapter
            </a></li>
<li title="Processes"><a href="processes.html#idp26224656">Processes</a></li>
<li title="Process Creation"><a href="processes.html#idp26226208">Process Creation</a></li>
<li title="Registered Processes"><a href="processes.html#idp26232160">Registered Processes</a></li>
<li title="Process Termination"><a href="processes.html#idp26245440">Process Termination</a></li>
<li title="Message Sending"><a href="processes.html#idp26256256">Message Sending</a></li>
<li title="Links"><a href="processes.html#idp26259712">Links</a></li>
<li title="Error Handling"><a href="processes.html#idp26267536">Error Handling</a></li>
<li title="Monitors"><a href="processes.html#idp26280848">Monitors</a></li>
<li title="Process Dictionary"><a href="processes.html#idp26291776">Process Dictionary</a></li>
</ul>
</li>
<li id="no" title="Distributed Erlang" expanded="false">Distributed Erlang<ul>
<li><a href="distributed.html">
              Top of chapter
            </a></li>
<li title="Distributed Erlang System"><a href="distributed.html#idp26299856">Distributed Erlang System</a></li>
<li title="Nodes"><a href="distributed.html#idp26303520">Nodes</a></li>
<li title="Node Connections"><a href="distributed.html#idp26311936">Node Connections</a></li>
<li title="epmd"><a href="distributed.html#idp26317888">epmd</a></li>
<li title="Hidden Nodes"><a href="distributed.html#idp26320304">Hidden Nodes</a></li>
<li title="C Nodes"><a href="distributed.html#idp26325840">C Nodes</a></li>
<li title="Security"><a href="distributed.html#idp26328736">Security</a></li>
<li title="Distribution BIFs"><a href="distributed.html#idp26341936">Distribution BIFs</a></li>
<li title="Distribution Command Line Flags"><a href="distributed.html#idp26377680">Distribution Command Line Flags</a></li>
<li title="Distribution Modules"><a href="distributed.html#idp26394144">Distribution Modules</a></li>
</ul>
</li>
<li id="no" title="Compilation and Code Loading" expanded="false">Compilation and Code Loading<ul>
<li><a href="code_loading.html">
              Top of chapter
            </a></li>
<li title="Compilation"><a href="code_loading.html#idp26418512">Compilation</a></li>
<li title="Code Loading"><a href="code_loading.html#idp26431712">Code Loading</a></li>
<li title="Code Replacement"><a href="code_loading.html#idp26437344">Code Replacement</a></li>
<li title="Running a function when a module is loaded"><a href="code_loading.html#idp26446288">Running a function when a module is loaded</a></li>
</ul>
</li>
<li id="no" title="Ports and Port Drivers" expanded="false">Ports and Port Drivers<ul>
<li><a href="ports.html">
              Top of chapter
            </a></li>
<li title="Ports"><a href="ports.html#idp26467024">Ports</a></li>
<li title="Port Drivers"><a href="ports.html#idp26471216">Port Drivers</a></li>
<li title="Port BIFs"><a href="ports.html#idp26476032">Port BIFs</a></li>
</ul>
</li>
</ul>
</div></div>
<div id="content">
<div class="innertube">
<h1>6 Functions</h1>
  

  <h3><a name="idp25190624">6.1 
        Function Declaration Syntax</a></h3>
    <a name="syntax"></a>
    
    <p>A <strong>function declaration</strong> is a sequence of function
      clauses separated by semicolons, and terminated by period (.).</p>
    <p>A <strong>function clause</strong> consists of a clause head and a
      clause body, separated by <span class="code">-&gt;</span>.</p>
    <p>A clause <strong>head</strong> consists of the function name, an
      argument list, and an optional guard sequence
      beginning with the keyword <span class="code">when</span>.</p>
    <div class="example"><pre>
Name(Pattern11,...,Pattern1N) [when GuardSeq1] -&gt;
    Body1;
...;
Name(PatternK1,...,PatternKN) [when GuardSeqK] -&gt;
    BodyK.</pre></div>
    <p>The function name is an atom. Each argument is a pattern.</p>
    <p>The number of arguments <span class="code">N</span> is the <strong>arity</strong> of
      the function. A function is uniquely defined by the module name,
      function name and arity. That is, two functions with the same
      name and in the same module, but with different arities are two
      completely different functions.</p>
    <p>A function named <span class="code">f</span> in the module <span class="code">m</span> and with arity
      <span class="code">N</span> is often denoted as <span class="code">m:f/N</span>.</p>
    <p>A clause <strong>body</strong> consists of a sequence of expressions
      separated by comma (,):</p>
    <div class="example"><pre>
Expr1,
...,
ExprN</pre></div>
    <p>Valid Erlang expressions and guard sequences are described in
      <span class="bold_code"><a href="expressions.html">Erlang Expressions</a></span>.</p>
    <p>Example:</p>
    <div class="example"><pre>
fact(N) when N&gt;0 -&gt;  % first clause head
    N * fact(N-1);   % first clause body

fact(0) -&gt;           % second clause head
    1.               % second clause body</pre></div>
  

  <h3><a name="idp25204464">6.2 
        Function Evaluation</a></h3>
    <a name="eval"></a>
    
    <p>When a function <span class="code">m:f/N</span> is called, first the code for
      the function is located. If the function cannot be found, an
      <span class="code">undef</span> run-time error will occur. Note that the function
      must be exported to be visible outside the module it is defined
      in.</p>
    <p>If the function is found, the function clauses are scanned
      sequentially until a clause is found that fulfills the following
      two conditions:</p>
    <ul>
      <li>the patterns in the clause head can be successfully
       matched against the given arguments, and</li>
      <li>the guard sequence, if any, is true.</li>
    </ul>
    <p>If such a clause cannot be found, a <span class="code">function_clause</span>
      run-time error will occur.</p>
    <p>If such a clause is found, the corresponding clause body is
      evaluated. That is, the expressions in the body are evaluated
      sequentially and the value of the last expression is returned.</p>
    <p>Example: Consider the function <span class="code">fact</span>:</p>
    <div class="example"><pre>
-module(m).
-export([fact/1]).

fact(N) when N&gt;0 -&gt;
    N * fact(N-1);
fact(0) -&gt;
    1.</pre></div>
    <p>Assume we want to calculate factorial for 1:</p>
    <div class="example"><pre>
1&gt; <span class="bold_code">m:fact(1).</span></pre></div>
    <p>Evaluation starts at the first clause. The pattern <span class="code">N</span> is
      matched against the argument 1. The matching succeeds and
      the guard (<span class="code">N&gt;0</span>) is true, thus <span class="code">N</span> is bound to 1 and
      the corresponding body is evaluated:</p>
    <div class="example"><pre>
<span class="bold_code">N * fact(N-1)</span> =&gt; (N is bound to 1)
<span class="bold_code">1 * fact(0)</span></pre></div>
    <p>Now <span class="code">fact(0)</span> is called and the function clauses are
      scanned sequentially again. First, the pattern <span class="code">N</span> is
      matched against 0. The matching succeeds, but the guard
      (<span class="code">N&gt;0</span>) is false. Second, the pattern 0 is matched against
      0. The matching succeeds and the body is evaluated:</p>
    <div class="example"><pre>
<span class="bold_code">1 * fact(0)</span> =&gt;
<span class="bold_code">1 * 1</span> =&gt;
<span class="bold_code">1</span></pre></div>
    <p>Evaluation has succeed and <span class="code">m:fact(1)</span> returns 1.</p>
    <p>If <span class="code">m:fact/1</span> is called with a negative number as
      argument, no clause head will match. A <span class="code">function_clause</span>
      run-time error will occur.</p>
  

  <h3><a name="idp25222528">6.3 
        Tail recursion</a></h3>
    
    <p>If the last expression of a function body is a function call,
      a <strong>tail recursive</strong> call is done so that no system
      resources for example call stack are consumed. This means
      that an infinite loop can be done if it uses tail recursive
      calls.</p>
    <p>Example:</p>
    <div class="example"><pre>
loop(N) -&gt;
    io:format("~w~n", [N]),
    loop(N+1).</pre></div>
    <p>As a counter-example see the factorial example above 
      that is not tail recursive since a multiplication is done
      on the result of the recursive call to <span class="code">fact(N-1)</span>.</p>
  

  <h3><a name="idp25226496">6.4 
        Built-In Functions, BIFs</a></h3>
    
    <p><strong>Built-in functions</strong>, BIFs, are implemented in C code in
      the runtime system and do things that are difficult or impossible
      to implement in Erlang. Most of the built-in functions belong
      to the module <span class="code">erlang</span> but there are also built-in functions
      belonging to a few other modules, for example <span class="code">lists</span> and
      <span class="code">ets</span>.</p>
    <p>The most commonly used BIFs belonging to <span class="code">erlang</span> are
      <strong>auto-imported</strong>, they do not need to be prefixed with
      the module name. Which BIFs are auto-imported is specified in
      <span class="code">erlang(3)</span>. For example, standard type conversion BIFs like
      <span class="code">atom_to_list</span> and BIFs allowed in guards can be called
      without specifying the module name. Examples:</p>
    <div class="example"><pre>
1&gt; <span class="bold_code">tuple_size({a,b,c}).</span>
3
2&gt; <span class="bold_code">atom_to_list('Erlang').</span>
"Erlang"</pre></div>
    <p>Note that normally it is the set of auto-imported built-in
      functions that is referred to when talking about 'BIFs'.</p>
  
</div>
<div class="footer">
<hr>
<p>Copyright © 2003-2018 Ericsson AB. All Rights Reserved.</p>
</div>
</div>
</div></body>
</html>
